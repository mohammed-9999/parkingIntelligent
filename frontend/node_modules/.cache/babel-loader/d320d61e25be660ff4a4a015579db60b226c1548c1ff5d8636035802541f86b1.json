{"ast":null,"code":"var _jsxFileName = \"C:\\\\desctop folder\\\\ENIAD\\\\2EME ANNEE\\\\S4\\\\IOT\\\\Projet\\\\Parking_intellegent\\\\frontend\\\\src\\\\components\\\\ParkingSpot.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Box, Text, Badge, VStack, Button, useToast } from '@chakra-ui/react';\nimport { motion } from 'framer-motion';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MotionBox = motion(Box);\n_c = MotionBox;\nfunction ParkingSpot({\n  id,\n  status,\n  lastUpdate\n}) {\n  _s();\n  const [isReserved, setIsReserved] = useState(false);\n  const toast = useToast();\n  const getStatusColor = status => {\n    switch (status) {\n      case 'libre':\n        return 'success.500';\n      case 'occupé':\n        return 'error.500';\n      case 'réservé':\n        return 'warning.500';\n      default:\n        return 'warning.500';\n    }\n  };\n  const formatLastUpdate = date => {\n    if (!date) return '';\n    const updateDate = new Date(date);\n    return updateDate.toLocaleTimeString();\n  };\n  const handleReservation = async () => {\n    if (status === 'libre' && !isReserved) {\n      try {\n        const response = await axios.post('http://localhost:3001/api/reserve-spot', {\n          id\n        });\n        if (response.data) {\n          setIsReserved(true);\n          toast({\n            title: 'Réservation confirmée',\n            description: `La place ${id} a été réservée avec succès`,\n            status: 'success',\n            duration: 3000,\n            isClosable: true\n          });\n        }\n      } catch (error) {\n        var _error$response, _error$response$data;\n        toast({\n          title: 'Erreur de réservation',\n          description: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Une erreur est survenue',\n          status: 'error',\n          duration: 3000,\n          isClosable: true\n        });\n      }\n    }\n  };\n  const handleCancelReservation = async () => {\n    try {\n      const response = await axios.post('http://localhost:3001/api/cancel-reservation', {\n        id\n      });\n      if (response.data) {\n        setIsReserved(false);\n        toast({\n          title: 'Réservation annulée',\n          description: `La réservation de la place ${id} a été annulée`,\n          status: 'warning',\n          duration: 3000,\n          isClosable: true\n        });\n      }\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      toast({\n        title: 'Erreur d\\'annulation',\n        description: ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || 'Une erreur est survenue',\n        status: 'error',\n        duration: 3000,\n        isClosable: true\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(MotionBox, {\n    p: 4,\n    borderWidth: \"1px\",\n    borderRadius: \"lg\",\n    bg: \"white\",\n    boxShadow: \"sm\",\n    borderColor: \"border.200\",\n    _hover: {\n      boxShadow: 'md',\n      borderColor: 'primary.500'\n    },\n    initial: {\n      opacity: 0,\n      y: 20\n    },\n    animate: {\n      opacity: 1,\n      y: 0\n    },\n    transition: {\n      duration: 0.3\n    },\n    whileHover: {\n      scale: 1.02\n    },\n    whileTap: {\n      scale: 0.98\n    },\n    children: /*#__PURE__*/_jsxDEV(VStack, {\n      spacing: 3,\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        fontWeight: \"bold\",\n        color: \"text.primary\",\n        fontSize: \"lg\",\n        children: [\"Place \", id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Badge, {\n        bg: getStatusColor(status),\n        color: \"white\",\n        px: 3,\n        py: 1,\n        borderRadius: \"full\",\n        fontSize: \"sm\",\n        fontWeight: \"medium\",\n        children: status.toUpperCase()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        fontSize: \"xs\",\n        color: \"text.secondary\",\n        children: [\"Derni\\xE8re mise \\xE0 jour: \", formatLastUpdate(lastUpdate)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), isReserved ? /*#__PURE__*/_jsxDEV(Button, {\n        colorScheme: \"error\",\n        bg: \"error.500\",\n        _hover: {\n          bg: 'error.600'\n        },\n        size: \"sm\",\n        width: \"full\",\n        onClick: handleCancelReservation,\n        children: \"Annuler la r\\xE9servation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Button, {\n        colorScheme: \"primary\",\n        bg: \"primary.500\",\n        _hover: {\n          bg: 'primary.600'\n        },\n        size: \"sm\",\n        width: \"full\",\n        onClick: handleReservation,\n        isDisabled: status === 'occupé' || status === 'réservé',\n        children: \"R\\xE9server\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n_s(ParkingSpot, \"qcMtjnzfHsqVKuzlfjFGzq6dlG0=\", false, function () {\n  return [useToast];\n});\n_c2 = ParkingSpot;\nexport default ParkingSpot;\nvar _c, _c2;\n$RefreshReg$(_c, \"MotionBox\");\n$RefreshReg$(_c2, \"ParkingSpot\");","map":{"version":3,"names":["React","useState","Box","Text","Badge","VStack","Button","useToast","motion","axios","jsxDEV","_jsxDEV","MotionBox","_c","ParkingSpot","id","status","lastUpdate","_s","isReserved","setIsReserved","toast","getStatusColor","formatLastUpdate","date","updateDate","Date","toLocaleTimeString","handleReservation","response","post","data","title","description","duration","isClosable","error","_error$response","_error$response$data","handleCancelReservation","_error$response2","_error$response2$data","p","borderWidth","borderRadius","bg","boxShadow","borderColor","_hover","initial","opacity","y","animate","transition","whileHover","scale","whileTap","children","spacing","fontWeight","color","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","px","py","toUpperCase","colorScheme","size","width","onClick","isDisabled","_c2","$RefreshReg$"],"sources":["C:/desctop folder/ENIAD/2EME ANNEE/S4/IOT/Projet/Parking_intellegent/frontend/src/components/ParkingSpot.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Box, Text, Badge, VStack, Button, useToast } from '@chakra-ui/react';\nimport { motion } from 'framer-motion';\nimport axios from 'axios';\n\nconst MotionBox = motion(Box);\n\nfunction ParkingSpot({ id, status, lastUpdate }) {\n  const [isReserved, setIsReserved] = useState(false);\n  const toast = useToast();\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'libre':\n        return 'success.500';\n      case 'occupé':\n        return 'error.500';\n      case 'réservé':\n        return 'warning.500';\n      default:\n        return 'warning.500';\n    }\n  };\n\n  const formatLastUpdate = (date) => {\n    if (!date) return '';\n    const updateDate = new Date(date);\n    return updateDate.toLocaleTimeString();\n  };\n\n  const handleReservation = async () => {\n    if (status === 'libre' && !isReserved) {\n      try {\n        const response = await axios.post('http://localhost:3001/api/reserve-spot', { id });\n        if (response.data) {\n          setIsReserved(true);\n          toast({\n            title: 'Réservation confirmée',\n            description: `La place ${id} a été réservée avec succès`,\n            status: 'success',\n            duration: 3000,\n            isClosable: true,\n          });\n        }\n      } catch (error) {\n        toast({\n          title: 'Erreur de réservation',\n          description: error.response?.data?.error || 'Une erreur est survenue',\n          status: 'error',\n          duration: 3000,\n          isClosable: true,\n        });\n      }\n    }\n  };\n\n  const handleCancelReservation = async () => {\n    try {\n      const response = await axios.post('http://localhost:3001/api/cancel-reservation', { id });\n      if (response.data) {\n        setIsReserved(false);\n        toast({\n          title: 'Réservation annulée',\n          description: `La réservation de la place ${id} a été annulée`,\n          status: 'warning',\n          duration: 3000,\n          isClosable: true,\n        });\n      }\n    } catch (error) {\n      toast({\n        title: 'Erreur d\\'annulation',\n        description: error.response?.data?.error || 'Une erreur est survenue',\n        status: 'error',\n        duration: 3000,\n        isClosable: true,\n      });\n    }\n  };\n\n  return (\n    <MotionBox\n      p={4}\n      borderWidth=\"1px\"\n      borderRadius=\"lg\"\n      bg=\"white\"\n      boxShadow=\"sm\"\n      borderColor=\"border.200\"\n      _hover={{ boxShadow: 'md', borderColor: 'primary.500' }}\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.3 }}\n      whileHover={{ scale: 1.02 }}\n      whileTap={{ scale: 0.98 }}\n    >\n      <VStack spacing={3}>\n        <Text \n          fontWeight=\"bold\" \n          color=\"text.primary\"\n          fontSize=\"lg\"\n        >\n          Place {id}\n        </Text>\n        <Badge\n          bg={getStatusColor(status)}\n          color=\"white\"\n          px={3}\n          py={1}\n          borderRadius=\"full\"\n          fontSize=\"sm\"\n          fontWeight=\"medium\"\n        >\n          {status.toUpperCase()}\n        </Badge>\n        <Text \n          fontSize=\"xs\" \n          color=\"text.secondary\"\n        >\n          Dernière mise à jour: {formatLastUpdate(lastUpdate)}\n        </Text>\n        \n        {isReserved ? (\n          <Button\n            colorScheme=\"error\"\n            bg=\"error.500\"\n            _hover={{ bg: 'error.600' }}\n            size=\"sm\"\n            width=\"full\"\n            onClick={handleCancelReservation}\n          >\n            Annuler la réservation\n          </Button>\n        ) : (\n          <Button\n            colorScheme=\"primary\"\n            bg=\"primary.500\"\n            _hover={{ bg: 'primary.600' }}\n            size=\"sm\"\n            width=\"full\"\n            onClick={handleReservation}\n            isDisabled={status === 'occupé' || status === 'réservé'}\n          >\n            Réserver\n          </Button>\n        )}\n      </VStack>\n    </MotionBox>\n  );\n}\n\nexport default ParkingSpot; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}